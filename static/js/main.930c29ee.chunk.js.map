{"version":3,"sources":["config.jsx","app/utils/MiscUtils.jsx","app/contexts/PageMetadataProvider.jsx","app/containers/MainContainer.jsx","app/contexts/ApiProvider.jsx","app/contexts/AppProviders.jsx","app/components/Debug.jsx","app/components/Spinner.jsx","app/pages/MainPage.jsx","app/App.jsx","index.jsx"],"names":["config","api","employeesUri","process","application","dateModified","debug","gitCommit","version","Context","createContext","usePageMetadata","useContext","types","pageTitle","reducer","state","action","type","payload","Error","PageMetadataProvider","children","useReducer","pageMetadata","dispatch","Provider","value","ApplicationVersion","className","style","fontSize","PageTitle","CardHeader","tag","ViewSource","href","rel","target","icon","faExternalLinkAlt","MainContainer","Container","Col","md","lg","Card","color","CardBody","ApiProvider","getEmployees","a","fetch","json","AppProviders","Debug","data","maxHeight","JSON","stringify","Spinner","text","props","size","MainPage","useEffect","usePageTitle","useAsync","error","isPending","reload","Alert","message","title","Button","onClick","faRedo","App","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.930c29ee.chunk.js","sourcesContent":["/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport { getDateModified, getGitCommit } from './app/utils/MiscUtils';\n\nconst config = {\n  api: {\n    employeesUri: process.env.REACT_APP_API_EMPLOYEES_URI\n  },\n\n  application: {\n    dateModified: getDateModified(),\n    debug: process.env.REACT_APP_DEBUG,\n    gitCommit: getGitCommit(),\n    version: process.env.REACT_APP_VERSION\n  }\n};\n\nexport default config;\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport preval from 'preval.macro';\n\nconst getDateModified = () => {\n  return preval(`\n    module.exports = new Date()\n      .toISOString()\n  `);\n};\n\nconst getGitCommit = () => {\n  return preval(`\n    module.exports = require(\"child_process\")\n      .execSync(\"git rev-parse HEAD\")\n      .toString()\n      .substring(0, 8)\n  `);\n};\n\nconst sleep = (milliseconds) => {\n  return new Promise((resolve) => setTimeout(resolve, milliseconds));\n};\n\nexport { getDateModified, getGitCommit, sleep };\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useEffect, useReducer } from 'react';\n\nconst Context = createContext();\nconst usePageMetadata = () => useContext(Context);\n\nusePageMetadata.types = {\n  pageTitle: 'PAGE_TITLE'\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case usePageMetadata.types.pageTitle:\n      return { pageTitle: action.payload };\n    default:\n      throw new Error(`Unhandled action type: ${action.type}`);\n  }\n};\n\nconst PageMetadataProvider = ({ children }) => {\n  const [pageMetadata, dispatch] = useReducer(reducer, {});\n  return <Context.Provider value={{ dispatch, pageMetadata }}>{children}</Context.Provider>;\n};\n\nconst usePageTitle = (pageTitle) => {\n  const { dispatch } = usePageMetadata();\n  useEffect(() => dispatch({ type: usePageMetadata.types.pageTitle, payload: pageTitle }), [dispatch, pageTitle]);\n};\n\nPageMetadataProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport default PageMetadataProvider;\nexport { usePageMetadata, usePageTitle };\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport { faExternalLinkAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Card, CardBody, CardHeader, Col, Container } from 'reactstrap';\nimport config from '../../config';\nimport { usePageMetadata } from '../contexts/PageMetadataProvider';\n\nconst ApplicationVersion = () => (\n  <div className=\"text-right\" style={{ fontSize: '75%' }}>\n    <em>\n      <code>\n        v{config.application.version} ({config.application.gitCommit}, {config.application.dateModified})\n      </code>\n    </em>\n  </div>\n);\n\nconst PageTitle = () => {\n  const { pageMetadata } = usePageMetadata();\n\n  if (pageMetadata.pageTitle) {\n    return (\n      <CardHeader tag=\"h1\" className=\"h4 font-weight-bold\">\n        {pageMetadata.pageTitle}\n      </CardHeader>\n    );\n  }\n\n  return null;\n};\n\nconst ViewSource = () => (\n  <div className=\"small text-muted text-right\">\n    View source on{' '}\n    <a href=\"https://github.com/portal-solutions/react-api-demo/\" rel=\"noopener noreferrer\" target=\"_blank\">\n      GitHub\n      <sup>\n        <FontAwesomeIcon icon={faExternalLinkAlt} className=\"ml-1 small\" />\n      </sup>\n    </a>\n  </div>\n);\n\nconst MainContainer = ({ children }) => {\n  return (\n    <Container className=\"py-3\">\n      <Col md=\"10\" lg=\"8\" className=\"mx-auto\">\n        <ApplicationVersion />\n\n        <Card color=\"light shadow\">\n          <PageTitle />\n          <CardBody>{children}</CardBody>\n        </Card>\n\n        <ViewSource />\n      </Col>\n    </Container>\n  );\n};\n\nMainContainer.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport default MainContainer;\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext } from 'react';\nimport config from '../../config';\n\nconst Context = createContext();\nconst useApi = () => useContext(Context);\n\nconst ApiProvider = ({ children }) => {\n  const getEmployees = async () => (await fetch(config.api.employeesUri)).json();\n  return <Context.Provider value={{ getEmployees }}>{children}</Context.Provider>;\n};\n\nApiProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport default ApiProvider;\nexport { useApi };\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ApiProvider from './ApiProvider';\nimport PageMetadataProvider from './PageMetadataProvider';\n\n/**\n * A context provider that provides all other context providers.\n */\nconst AppProviders = ({ children }) => (\n  <ApiProvider>\n    <PageMetadataProvider>{children}</PageMetadataProvider>\n  </ApiProvider>\n);\n\nAppProviders.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport default AppProviders;\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\n/* eslint-disable react/forbid-prop-types */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst Debug = ({ data }) => (\n  <pre className=\"bg-white border overflow-auto small\" style={{ maxHeight: '250px' }}>\n    {JSON.stringify(data, null, 2)}\n  </pre>\n);\n\nDebug.propTypes = {\n  data: PropTypes.object.isRequired\n};\n\nexport default Debug;\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Spinner as ReactSpinner } from 'reactstrap';\n\nconst Spinner = ({ text, ...props }) => (\n  <div className=\"text-center\">\n    <p>{text}</p>\n    <ReactSpinner size=\"xl\" {...props} />\n  </div>\n);\n\nSpinner.propTypes = {\n  text: PropTypes.string.isRequired\n};\n\nexport default Spinner;\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport { faExternalLinkAlt, faRedo } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React from 'react';\nimport { useAsync } from 'react-async';\nimport { Alert, Button } from 'reactstrap';\nimport config from '../../config';\nimport Debug from '../components/Debug';\nimport Spinner from '../components/Spinner';\nimport { useApi } from '../contexts/ApiProvider';\nimport { usePageTitle } from '../contexts/PageMetadataProvider';\n\nconst MainPage = () => {\n  usePageTitle('React API demo');\n\n  const { getEmployees } = useApi();\n  const { data, error, isPending, reload } = useAsync(getEmployees);\n\n  if (isPending) {\n    return <Spinner text=\"Fetching API data...\" />;\n  }\n\n  if (error) {\n    return (\n      <Alert color=\"danger\" className=\"m-0\">\n        There was an error fetching data: &quot;<em>{error.message}</em>&quot;.\n      </Alert>\n    );\n  }\n\n  return (\n    <>\n      <h2 className=\"h6\">\n        Response from{' '}\n        <a href={config.api.employeesUri} rel=\"noopener noreferrer\" target=\"_blank\" title={config.api.employeesUri}>\n          Employees API\n          <sup>\n            <FontAwesomeIcon icon={faExternalLinkAlt} className=\"ml-1 small\" />\n          </sup>\n        </a>\n      </h2>\n\n      <Debug data={data} />\n\n      <div className=\"text-right\">\n        <Button type=\"button\" className=\"shadow-sm\" color=\"primary\" size=\"sm\" onClick={reload}>\n          <FontAwesomeIcon icon={faRedo} /> Fetch again...\n        </Button>\n      </div>\n    </>\n  );\n};\n\nexport default MainPage;\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport React from 'react';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\nimport MainContainer from './containers/MainContainer';\nimport AppProviders from './contexts/AppProviders';\nimport MainPage from './pages/MainPage';\n\nconst App = () => (\n  <AppProviders>\n    <MainContainer>\n      <HashRouter>\n        <Switch>\n          <Route exact path=\"/\" component={MainPage} />\n        </Switch>\n      </HashRouter>\n    </MainContainer>\n  </AppProviders>\n);\n\nexport default App;\n","/**\n * Copyright (c) Portal Solutions and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @author Greg Baker <gregory.j.baker@hrsdc-rhdcc.gc.ca>\n */\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n// IMPORTANT: always keep polyfills as first imports!\nimport 'react-app-polyfill/ie11';\nimport 'react-app-polyfill/stable';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}